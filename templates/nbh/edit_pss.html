{% extends 'templates/index.html'%}
{% load static %}
{% load SelfDefinedFilter %}
{% block title %}压力知觉量表（PSS）{% endblock %}
{% block css %}
    <link href="{% static '/css/scales_style.css' %}" rel="stylesheet" >
{% endblock %}
{% block content %}
     <div class="right_col" role="main">
        <div class="container">
            <div class="row show-grid">
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <ul class="breadcrumb" style="background-color: white;font-weight:bold">
                         <li ><a href="#">量表评估</a></li>
                         <li><a href="#" >自评量表</a></li>
                         <li class="active"><a href="#" >压力知觉量表（PSS）</a></li>
                         <div style="float: right;margin-bottom: 0px;">
                            <a id ="return_url" href="/patients/get_patient_detail?&patient_id={{ patient_id }}&page=1"
                               class="btn btn-warning btn-xs"><i class="fa fa-arrow-left"></i><strong>&nbsp;返&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;回</strong></a>
                        </div>
                    </ul>
                </div>
            </div>
        </div>  
        <div class="dashboard_graph x_panel" style="margin-top:0px;height: 80%;">
            <div id="left-side" style="height: 100%;" class="col-md-2">
                <ul class="scales_progress">
                    {% for scale_name in scale_name_list %}
                        {% if scale_name|get_item:'scale__scale_name' == '压力知觉量表（PSS）' %}
                            <li class="step doing">
                                <p>{{ scale_name|get_item:'scale__scale_name' }}</p>
                            </li>
                        {% elif scale_name|get_item:'state' == 1 %}
                            <li class="step done notclick">
                                <p>{{ scale_name|get_item:'scale__scale_name' }}</p>
                            </li>
                        {% else %}
                             <li class="step nodone notclick">
                                <p>{{ scale_name|get_item:'scale__scale_name' }}</p>
                            </li>
                        {% endif %}
                    {% endfor %}
                    <li class="finish nodone notclick">
                        <p>完成</p>
                    </li>
                </ul>
            </div>
				         
              <div id="right-side" class="col-md-10">
                  <div id="first" class="active">
                            <div class="container" style="width: 95%">

                            <div class="row" style="margin-left:5px;margin-top: 5px;padding-bottom: 5px;">
                                <h4><strong><center>压力知觉量表（PSS）</center><br/></strong></h4>
                            </div>
                             <div   style="margin: 5px;">这份量表是在询问在最近一个月来，您个人的感受和想法，请您于每一个题项上作答时，去指出您感受或想到某一特定想法的频率。虽然有些问题看是相似，实则是有所差异，所以每一题均需作答。而作答方式尽量以快速、不假思索方式填答，亦即不要去思虑计算每一题分数背后之意涵，以期确实反映您真实的压力知觉状况。而每一题项皆有下列五种选择：
                                 0：从不　1：偶尔　2:有时　3: 时常　4：总是　
                             </div>

                            <div class="row">
                                <div class="col-md-12 column">
			                        <table   class="table table-bordered table-condensed" style="table-layout: fixed; width:100%;">
				                        <thead>
					                    <tr>
						                    <th style="width:30%">
                                                <center> </center>
						                    </th>
                                            <th  style="width:14%">
                                                <center> 0</center>
						                    </th>
                                            <th  style="width:14%">
                                                <center> 1</center>
						                    </th>
                                            <th  style="width:14%">
                                                <center> 2</center>
						                    </th>
                                            <th  style="width:14%">
                                                <center> 3</center>
						                    </th>
                                            <th  style="width:14%">
                                                <center> 4</center>
						                    </th>
					                    </tr>
				                        </thead>
				                        <tbody align="left">
                                             <tr>
						                        <td style="width:50%">1.一些无法预期的事情发生而感到心烦意乱。</td>
                                                 <td style="width:10%"><input type="radio"  name="question1_answer" value=1 data-labelauty="从不"/></td>
                                                 <td style="width:10%"><input type="radio"  name="question1_answer" value=2 data-labelauty="偶尔"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question1_answer" value=3 data-labelauty="有时"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question1_answer" value=4 data-labelauty="时常"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question1_answer" value=5 data-labelauty="总是"/></td>
					                        </tr>
                                            <tr>
						                        <td>2.感觉无法控制自己生活中重要的事情。</td>
                                                <td style="width:10%"><input type="radio"  name="question2_answer" value=1 data-labelauty="从不"/></td>
                                                 <td style="width:10%"><input type="radio"  name="question2_answer" value=2 data-labelauty="偶尔"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question1_answer" value=3 data-labelauty="有时"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question2_answer" value=4 data-labelauty="时常"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question2_answer" value=5 data-labelauty="总是"/></td>
					                        </tr>
                                            <tr>
						                        <td>3.感到紧张不安和压力。</td>
                                                 <td style="width:10%"><input type="radio"  name="question3_answer" value=1 data-labelauty="从不"/></td>
                                                 <td style="width:10%"><input type="radio"  name="question3_answer" value=2 data-labelauty="偶尔"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question3_answer" value=3 data-labelauty="有时"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question3_answer" value=4 data-labelauty="时常"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question3_answer" value=5 data-labelauty="总是"/></td>
					                        </tr>
                                            <tr>
						                        <td>4.成功地处理恼人的生活麻烦。</td>
                                                <td style="width:10%"><input type="radio"  name="question4_answer" value=5 data-labelauty="从不"/></td>
                                                 <td style="width:10%"><input type="radio"  name="question4_answer" value=4 data-labelauty="偶尔"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question4_answer" value=3 data-labelauty="有时"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question4_answer" value=2 data-labelauty="时常"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question4_answer" value=1 data-labelauty="总是"/></td>
					                        </tr>
                                            <tr>
						                        <td>5.感到自己是有效地处理生活中所发生的重要改变。</td>
                                                <td style="width:10%"><input type="radio"  name="question5_answer" value=5 data-labelauty="从不"/></td>
                                                 <td style="width:10%"><input type="radio"  name="question5_answer" value=4 data-labelauty="偶尔"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question5_answer" value=3 data-labelauty="有时"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question5_answer" value=2 data-labelauty="时常"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question5_answer" value=1 data-labelauty="总是"/></td>
					                        </tr>
                                            <tr>
						                        <td>6.对于有能力处理自己私人的问题感到很有信心。</td>
                                                 <td style="width:10%"><input type="radio"  name="question6_answer" value=5 data-labelauty="从不"/></td>
                                                 <td style="width:10%"><input type="radio"  name="question6_answer" value=4 data-labelauty="偶尔"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question6_answer" value=3 data-labelauty="有时"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question6_answer" value=2 data-labelauty="时常"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question6_answer" value=1 data-labelauty="总是"/></td>
					                        </tr>
                                            <tr>
						                        <td>7.感到事情顺心如意。</td>
                                                <td style="width:10%"><input type="radio"  name="question7_answer" value=5 data-labelauty="从不"/></td>
                                                 <td style="width:10%"><input type="radio"  name="question7_answer" value=4 data-labelauty="偶尔"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question7_answer" value=3 data-labelauty="有时"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question7_answer" value=2 data-labelauty="时常"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question7_answer" value=1 data-labelauty="总是"/></td>
					                        </tr>
                                            <tr>
						                        <td>8.发现自己无法处理所有自己必须做的事情。</td>
                                                 <td style="width:10%"><input type="radio"  name="question8_answer" value=1 data-labelauty="从不"/></td>
                                                 <td style="width:10%"><input type="radio"  name="question8_answer" value=2 data-labelauty="偶尔"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question8_answer" value=3 data-labelauty="有时"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question8_answer" value=4 data-labelauty="时常"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question8_answer" value=5 data-labelauty="总是"/></td>
					                        </tr>
                                            <tr>
						                        <td>9.有办法控制生活中恼人的事情。</td>
                                               <td style="width:10%"><input type="radio"  name="question9_answer" value=5 data-labelauty="从不"/></td>
                                                 <td style="width:10%"><input type="radio"  name="question9_answer" value=4 data-labelauty="偶尔"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question9_answer" value=3 data-labelauty="有时"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question9_answer" value=2 data-labelauty="时常"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question9_answer" value=1 data-labelauty="总是"/></td>
					                        </tr>
                                            <tr>
						                        <td>10.常觉得自己是驾驭事情的主人。</td>
                                                <td style="width:10%"><input type="radio"  name="question10_answer" value=5 data-labelauty="从不"/></td>
                                                 <td style="width:10%"><input type="radio"  name="question10_answer" value=4 data-labelauty="偶尔"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question10_answer" value=3 data-labelauty="有时"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question10_answer" value=2 data-labelauty="时常"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question10_answer" value=1 data-labelauty="总是"/></td>
					                        </tr>
                                            <tr>
						                        <td>11.常生气，因为很多事情的发生是超出自己所能控制的。</td>
                                                 <td style="width:10%"><input type="radio"  name="question11_answer" value=1 data-labelauty="从不"/></td>
                                                 <td style="width:10%"><input type="radio"  name="question11_answer" value=2 data-labelauty="偶尔"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question11_answer" value=3 data-labelauty="有时"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question11_answer" value=4 data-labelauty="时常"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question11_answer" value=5 data-labelauty="总是"/></td>
					                        </tr>
                                            <tr>
						                        <td>12.经常想到有些事情是自己必须完成的。</td>
                                                <td style="width:10%"><input type="radio"  name="question12_answer" value=5 data-labelauty="从不"/></td>
                                                 <td style="width:10%"><input type="radio"  name="question12_answer" value=4 data-labelauty="偶尔"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question12_answer" value=3 data-labelauty="有时"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question12_answer" value=2 data-labelauty="时常"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question12_answer" value=1 data-labelauty="总是"/></td>
					                        </tr>
                                            <tr>
						                        <td>13.常能掌握时间安排方式。</td>
                                               <td style="width:10%"><input type="radio"  name="question13_answer" value=5 data-labelauty="从不"/></td>
                                                 <td style="width:10%"><input type="radio"  name="question13_answer" value=4 data-labelauty="偶尔"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question13_answer" value=3 data-labelauty="有时"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question13_answer" value=2 data-labelauty="时常"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question13_answer" value=1 data-labelauty="总是"/></td>
					                        </tr>
                                            <tr>
						                        <td>14.常感到困难的事情堆积如山，而自己无法克服它们？</td>
                                               <td style="width:10%"><input type="radio"  name="question14_answer" value=1 data-labelauty="从不"/></td>
                                                 <td style="width:10%"><input type="radio"  name="question14_answer" value=2 data-labelauty="偶尔"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question14_answer" value=3 data-labelauty="有时"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question14_answer" value=4 data-labelauty="时常"/></td>
                                                 <td style="width: 10%;"><input type="radio"  name="question14_answer" value=5 data-labelauty="总是"/></td>
					                        </tr>



                                        </tbody>
                                    </table>
                                </div>
                            </div>
                                <div class="row">
                                 <div class="col-md-12 col-sm-12">
                                     <a  style="float: left;font-weight: bold">总分：{{ pss_answer.total_score|processNone }}</a>
                                 </div>
                            </div>


                            <div class="row" id="bt_group">
                                <div class="col-md-4 col-sm-6 text-center">
                                    <a href="/scales/get_self_last_url?patient_session_id={{ patient_session_id }}&patient_id={{ patient_id }}&scale_id={{ scale_id }}"
                                       id="last_scale">
                                        <button type="button" class="btn btn-warning" id="bt_return">返回上一量表</button>
                                    </a>
                                </div>
                                <div class="col-md-4 col-sm-6" id="next_scale">
                                    <a href="/scales/get_self_next_url?patient_session_id={{ patient_session_id }}&patient_id={{ patient_id }}&scale_id={{ scale_id }}">
                                        <input type="button" class="btn btn-success text-center" value="进入下一量表">
                                    </a>
                                </div>
                                <div class="col-md-4 col-sm-6" id="next_scale_final">
                                    <a href="/scales/select_scales?patient_session_id={{ patient_session_id }}&patient_id={{ patient_id }}">
                                        <input type="button" class="btn btn-success text-center" value="进入下一量表">
                                    </a>
                                </div>
                            </div>


                        </div>
                </div>
            </div>
        </div>

</div>

<script>
        function getData() {
            var order = "{{ order }}";
            if (order == 0) {{% comment %}第一个{% endcomment %}
                $("#last_scale").attr("style", "display:none;");
                $("#next_scale_final").attr("style", "display:none;");
                $("#next_scale").attr("style", "display:block;");
            } else if (order == 1) {{% comment %}最后一个{% endcomment %}
                $("#last_scale").attr("style", "display:block;");
                $("#next_scale_final").attr("style", "display:block;");
                $("#next_scale").attr("style", "display:none;");
            } else {{# 啥也不是 #}
                $("#last_scale").attr("style", "display:block;");
                $("#next_scale_final").attr("style", "display:none;");
                $("#next_scale").attr("style", "display:block;");
            }
            if ('{{ pss_answer }}' != 'None') {
                {#数据填充 读数据#}
                if ('{{ pss_answer.question1_answer }}' != 'None') {
                    $("input[name='question1_answer'][value=" + Number({{ pss_answer.question1_answer }}) + "]").prop("checked", true);
                }
                if ('{{ pss_answer.question2_answer }}' != 'None') {
                    $("input[name='question2_answer'][value=" + Number({{ pss_answer.question2_answer }}) + "]").prop("checked", true);
                }
                if ('{{ pss_answer.question3_answer }}' != 'None') {
                    $("input[name='question3_answer'][value=" + Number({{ pss_answer.question3_answer }}) + "]").prop("checked", true);
                }
                if ('{{ pss_answer.question4_answer }}' != 'None') {
                    $("input[name='question4_answer'][value=" + Number({{ pss_answer.question4_answer }}) + "]").prop("checked", true);
                }
                if ('{{ pss_answer.question5_answer }}' != 'None') {
                    $("input[name='question5_answer'][value=" + Number({{ pss_answer.question5_answer }}) + "]").prop("checked", true);
                }
                if ('{{ pss_answer.question6_answer }}' != 'None') {
                    $("input[name='question6_answer'][value=" + Number({{ pss_answer.question6_answer }}) + "]").prop("checked", true);
                }
                if ('{{ pss_answer.question7_answer }}' != 'None') {
                    $("input[name='question7_answer'][value=" + Number({{ pss_answer.question7_answer }}) + "]").prop("checked", true);
                }
                if ('{{ pss_answer.question8_answer }}' != 'None') {
                    $("input[name='question8_answer'][value=" + Number({{ pss_answer.question8_answer }}) + "]").prop("checked", true);
                }
                if ('{{ pss_answer.question9_answer }}' != 'None') {
                    $("input[name='question9_answer'][value=" + Number({{ pss_answer.question9_answer }}) + "]").prop("checked", true);
                }if ('{{ pss_answer.question10_answer }}' != 'None') {
                    $("input[name='question10_answer'][value=" + Number({{ pss_answer.question10_answer }}) + "]").prop("checked", true);
                }
                if ('{{ pss_answer.question11_answer }}' != 'None') {
                    $("input[name='question11_answer'][value=" + Number({{ pss_answer.question11_answer }}) + "]").prop("checked", true);
                }
                if ('{{ pss_answer.question12_answer }}' != 'None') {
                    $("input[name='question12_answer'][value=" + Number({{ pss_answer.question12_answer }}) + "]").prop("checked", true);
                }
                if ('{{ pss_answer.question13_answer }}' != 'None') {
                    $("input[name='question13_answer'][value=" + Number({{ pss_answer.question13_answer }}) + "]").prop("checked", true);
                }
                if ('{{ pss_answer.question14_answer }}' != 'None') {
                    $("input[name='question14_answer'][value=" + Number({{ pss_answer.question14_answer }}) + "]").prop("checked", true);
                }



            }
            {#锁住#}
            $("input[name='question1_answer']").attr("disabled", "disabled");
            $("input[name='question2_answer']").attr("disabled", "disabled");
            $("input[name='question3_answer']").attr("disabled", "disabled");
            $("input[name='question4_answer']").attr("disabled", "disabled");
            $("input[name='question5_answer']").attr("disabled", "disabled");
            $("input[name='question6_answer']").attr("disabled", "disabled");
            $("input[name='question7_answer']").attr("disabled", "disabled");
            $("input[name='question8_answer']").attr("disabled", "disabled");
            $("input[name='question9_answer']").attr("disabled", "disabled");
            $("input[name='question10_answer']").attr("disabled", "disabled");
            $("input[name='question11_answer']").attr("disabled", "disabled");
            $("input[name='question12_answer']").attr("disabled", "disabled");
            $("input[name='question13_answer']").attr("disabled", "disabled");
            $("input[name='question14_answer']").attr("disabled", "disabled");


        }
    </script>
{% endblock %}

{% block js %}
<script type="text/javascript" src="{% static '/js/jquery-radio-beauty.js'%}"></script>

<script>
$(document).ready(function(){
	$("input[type='radio']").labelauty();
});
</script>
{% endblock %}
